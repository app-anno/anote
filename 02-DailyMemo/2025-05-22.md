---
created: 2025-05-22
tags:
---

## TODO
- 釣り船CSチームのGMVあってるかどうか
- 桐山さんとすり合わせる
- ジョニーさんのKPI自動化
- 桐山さんにReproのやつできるかいう

## 今週優先すること
- マップのリファクタ & パフォーマンス改善
- ジョニーさんのKPI自動化
- 

## 今日優先すること
- キャッシュの取り扱い方
- マップのリファクタ
- 

## 小さな成功
- リサーチがgenspark使うことでさくっと終わった
- MTG以外も立ってやることができた
- 

## 今日やったこと
- FPSバージョン別に見えるようにして、バージョンの色もわかりやすいように修正した
- BigQueryのコストをもっと見やすくした
- キャッシュの取り扱い方


## 自己省察

### 1日の振り返り
①今日の1日の行動や選択はどうだったか？
- 
- 
- 

②今日の過ごし方は自分はどういう風に感じたか？
- 
- 
- 

③うまくいったことはなにか？
- 
- 
- 

④失敗したことはなにか？
- 
- 
- 

## 学んだこと・気付き・その他・改善点
### キャッシュ処理の最適化について

#### 現状の分析
- ヒートマップデータ: 1件あたり約500KB
- SQLite（AsyncStorage）の保存上限: デバイスにより異なる（一般的に4MB程度）
  - 低スペック端末ではさらに小さい場合あり

#### 動作の仕組み
- 4MB上限到達時: SQLiteが自動的に保存を拒否
- アプリクラッシュは発生しない
- キャッシュは自然に制限される

#### 最適な運用方法
- シンプルなキャッシュ処理を採用
  - AsyncStorageへの直接保存
  - 一括削除のみ実装
- 複雑な管理は不要
  - サイズ監視
  - 自動削除ロジック
  - 古いキャッシュの管理

#### 結論
- 現状のシンプルな実装が最適
- SQLiteの上限管理に任せる
- 「入るだけ入れて、入らなくなったら諦める」方針
- 余計な管理ロジックはパフォーマンスを悪化させる可能性あり

### ベテランエンジニアの観点

#### 1. 「シンプル is ベスト」は正しい
- モバイルのローカルキャッシュは「複雑な管理を入れるほどバグやパフォーマンス劣化の温床」になりやすい
- SQLiteやAsyncStorageの物理上限に任せるのは、実は現場でもよく採用される戦略
- 端末ごとに上限が違うため、「入るだけ入れて、入らなくなったら諦める」運用は合理的

#### 2. パフォーマンス重視なら「余計な処理をしない」
- キャッシュのサイズ監視やLRU削除は、ストレージI/Oやメモリ消費が増え、本末転倒なパフォーマンス低下を招くことが多い

#### 3. 「困ったときにだけ対策」でOK
- 実際に「キャッシュが溜まりすぎて困る」ケースが出てから、初めて対策を検討すればよい
- それまではシンプルな実装で保守性・安定性を優先するのが現場流

#### 4. ユーザー体験を損なわないことが最優先
- キャッシュが入らなくなっても、APIから再取得できれば致命的な問題にはならない
- 逆に、キャッシュ管理の複雑化でアプリが重くなる方がユーザー体験を損なう

### まとめ
- 今のシンプルなキャッシュ戦略は、ベテランエンジニアから見ても「正解」寄り
- 余計な最適化や複雑化は、現場でも「やらない方がいい」と判断されることが多い
- もし将来「本当に困る」状況が出たら、その時にだけ最小限の対策を追加すればOK

## 明日すること
- ジョニーさんの自動化
- 
- 

## 明日へのアクション
- 
- 

## Memo
